(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{109:function(n,o,e){"use strict";e.r(o);var t=e(37);function r(){return!["/onboarding","/signout_confirm","/privacy","/admin/creator_settings/new"].includes(window.location.pathname)}function c(){return r()&&!["/code-of-conduct","/terms"].includes(window.location.pathname)}function i(n){return n.saw_onboarding&&n.checked_code_of_conduct&&n.checked_terms_and_conditions}function a(n){return"true"===document.body.dataset.creator&&!n.saw_onboarding}function d(){var n,o=null===(n=localStorage.getItem("shouldRedirectToOnboarding"))||void 0===n||n;return JSON.parse(o)}HTMLDocument.prototype.ready=new Promise((function(n){return"loading"!==document.readyState?n():(document.addEventListener("DOMContentLoaded",(function(){return n()})),null)})),document.ready.then(Object(t.a)().then((function(n){var o=n.currentUser,e=n.csrfToken;window.currentUser=o,window.csrfToken=e,a(o)?c()&&(window.location="".concat(window.location.origin,"/admin/creator_settings/new?referrer=").concat(window.location)):r()&&!i(o)&&(window.location="".concat(window.location.origin,"/onboarding?referrer=").concat(window.location))})).catch((function(n){console.error("Error getting user and CSRF Token",n)}))),window.InstantClick.on("change",(function(){Object(t.a)().then((function(n){var o=n.currentUser;c()&&d()&&a(o)?window.location="".concat(window.location.origin,"/admin/creator_settings/new?referrer=").concat(window.location):r()&&d()&&!i(o)&&(window.location="".concat(window.location.origin,"/onboarding?referrer=").concat(window.location))})).catch((function(n){console.error("Error getting user and CSRF Token",n)}))}))},37:function(n,o,e){"use strict";e.d(o,"a",(function(){return r}));var t=function(n){var o=n.resolve,e=n.reject,t=n.waitTime,r=void 0===t?20:t,c=0;return function n(){if(3e3!==c){var t,i=(document,null!==(t=document.querySelector("meta[name='csrf-token']"))?t.content:void 0),a=document.body.dataset.user;if(a&&void 0!==i){var d=JSON.parse(a);o({currentUser:d,csrfToken:i})}else c+=r,setTimeout(n,r)}else e(new Error("Couldn't find user data on page."))}};function r(){return new Promise((function(n,o){t({resolve:n,reject:o})()}))}}},[[109,88]]]);
//# sourceMappingURL=onboardingRedirectCheck-8d89adf7d2ceb9b82680.chunk.js.map